---
import HeaderLink from './HeaderLink.astro'
import { Icon } from 'astro-icon/components'
import ThemeSelector from './ThemeSelector.astro'

const links = [
  {
    display: 'Home',
    location: '/',
  },
  {
    display: 'Blog',
    location: '/blog',
  },
  {
    display: 'Projects',
    location: '/projects',
  },
]
---

<header class="fixed top-0 w-full z-40">
  <nav class="bg-background text-foreground transition-colors duration-300">
    <div
      class="container mx-auto flex px-6 justify-between items-center py-6 sm:px-20 2xl:px-16"
    >
      <h2>
        <a href="/" class="text-foreground"
          ><svg
            role="img"
            width="50"
            viewBox="0 0 67 45"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            class="main-logo group"
          >
            <title>Home</title>
            <rect
              x="18.6135"
              y="31.6147"
              width="34.7861"
              height="8.08374"
              rx="1.79536"
              transform="rotate(-45 18.6135 31.6147)"
              class="yellow-logo-bar group-hover:animate-pulse duration-75"
              style="animation-duration: 800ms; transition-timing-function: ease;"
              fill="#FFB800"></rect>
            <rect
              x="45.6096"
              y="37.8223"
              width="21.9932"
              height="8.18162"
              rx="1.79536"
              transform="rotate(-45 45.6096 37.8223)"
              fill="currentColor"></rect>
            <rect
              width="22.9509"
              height="8.12147"
              rx="1.79536"
              transform="matrix(-0.707107 -0.707107 -0.707107 0.707107 66.9343 16.6172)"
              fill="currentColor"></rect>
            <rect
              width="23.2013"
              height="8.39914"
              rx="1.79536"
              transform="matrix(-0.707107 -0.707107 -0.707107 0.707107 23.2441 38.6763)"
              fill="currentColor"></rect>
            <rect
              x="1.31689"
              y="16.8687"
              width="21.9932"
              height="7.76636"
              rx="1.79536"
              transform="rotate(-45 1.31689 16.8687)"
              fill="currentColor"></rect>
          </svg><span class="hidden">Home</span></a
        >
      </h2>
      <div class="gap-14 hidden md:flex items-center">
        {
          links.map((link) => (
            <HeaderLink
              class:list="uppercase font-semibold"
              href={link.location}
            >
              {link.display}
            </HeaderLink>
          ))
        }
      </div>
      <!-- <button
        class="md:block hidden"
        id="theme-toggle"
        aria-label="Toggle Dark Mode"
      >
        <Icon name="mdi:brightness-6" size={26} />
      </button> -->
      <a
        href="mailto:yash25.j@gmail.com"
        class="md:block hidden border-[1px] border-foreground px-4 py-2 rounded-lg font-semibold text-sm uppercase transition-colors duration-75 hover:text-basecolor hover:bg-foreground"
        >Contact</a
      >
      <button class="md:hidden" id="nav-open-btn">
        <Icon name="mdi:menu" size={32} />
      </button>

      <!-- Mobile nav -->
      <div
        class="fixed top-0 right-0 bg-white dark:bg-neutral-900 h-screen w-5/6 px-8 py-6 transition-transform z-40 border-l-[1px] border-background"
        id="mobile-menu"
      >
        <!-- <div class="flex justify-between">
          <button>
            <Icon name="mdi:brightness-6" size={32} />
          </button>
          <button id="nav-close-btn">
            <Icon name="mdi:close" size={32} />
          </button>
        </div> -->
        <button id="nav-close-btn" class="ml-auto block">
          <Icon name="mdi:close" size={32} />
        </button>
        <div class="flex flex-col h-full items-start gap-8 pt-28">
          {
            links.map((link) => (
              <HeaderLink class="text-5xl font-light" href={link.location}>
                {link.display}
              </HeaderLink>
            ))
          }
          <HeaderLink
            class="text-5xl font-light"
            href="mailto:yash25.j@gmail.com"
          >
            Contact
          </HeaderLink>
          <ThemeSelector class:list="mt-4" />
        </div>
      </div>
    </div>
  </nav>
  <!-- 
  <style lang="css">
    [data-icon] {
      width: 26px;
    }
  </style> -->

  <script>
    function toggleNav() {
      document
        .querySelector('#mobile-menu')
        ?.classList.toggle('translate-x-full')
    }

    document
      .querySelector('#nav-open-btn')
      ?.addEventListener('click', toggleNav)
    document
      .querySelector('#nav-close-btn')
      ?.addEventListener('click', toggleNav)
  </script>
</header>

<!-- <script is:inline>
  const theme = (() => {
    if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
      return localStorage.getItem('theme')
    }
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
      return 'dark'
    }
    return 'light'
  })()

  if (theme === 'light') {
    document.documentElement.classList.remove('dark')
  } else {
    document.documentElement.classList.add('dark')
  }

  window.localStorage.setItem('theme', theme)

  const handleToggleClick = () => {
    console.log('clicked')
    const element = document.documentElement
    element.classList.toggle('dark')

    const isDark = element.classList.contains('dark')
    localStorage.setItem('theme', isDark ? 'dark' : 'light')
  }

  document
    .getElementById('theme-toggle')
    .addEventListener('click', handleToggleClick)
</script> -->
